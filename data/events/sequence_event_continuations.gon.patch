Genie_Good {
    main {
        options.overwrite {
            wealth {
                label EVENT_GENIE_CHOICE_WEALTH
                stat none

                good {
                    reward {
                        common {
                            prompt "EVENT_GENIEOFTHELAMP_REW1"
                            gain_coins [30 60]
                        }
                        rare {
                            prompt "EVENT_GENIEOFTHELAMP_REW2"
                            get_item_from_pool {
                                pool chapter_rare
                            }
                            get_item_from_pool {
                                pool chapter_rare
                            }
                            get_item_from_pool {
                                pool chapter_rare
                            }
                            get_item_from_pool {
                                pool chapter_rare
                            }
                        }
                    }
                }
            }

            looks {
                label EVENT_GENIE_CHOICE_LOOKS
                stat none

                good {
                    reward {
                        common {
                            prompt "EVENT_GENIEOFTHELAMP_REW3"
                            permanent_stats {
                                cha 4
                            }
                        }
                        rare {
                            prompt "EVENT_GENIEOFTHELAMP_REW4"
                            gain_disorder Gigachad
                            permanent_stats {
                                cha 3
                            }
                            mutation {
                                head 305
                            }
                        }
                    }
                }
            }

            power {
                label EVENT_GENIE_CHOICE_POWER
                stat none

                good {
                    reward {
                        common {
                            prompt "EVENT_GENIEOFTHELAMP_REW5"
                            permanent_stats {
                                str 4
                            }
                        }
                        rare {
                            prompt "EVENT_GENIEOFTHELAMP_REW6"
							permanent_stats {
                                str 4
                            }
                            level_up self
							level_up self
                        }
                    }
                }
            }
        }
    }
}

WatchingHead2 {
    main {
        options.overwrite {
            fight {
                label "EVENT_FIGHT_ANSW"
                stat str

                good {
                    set_frame 2
                    prompt "EVENT_WATCHINGHEAD2_REW1"
                    get_item HumanBrain
                }
            }
        }
    }
}

MonkeyPawWish {
    main {
        options.overwrite {
            wish_strength {
                requirements {
                    not_has_token WorldEventLegacyToken_MonkeyPawStrength
                }

                label "EVENT_MONKEYPAW_WISH1"
                stat none

                good {
                    set_frame 2
                    prompt "EVENT_MONKEYPAW_WISH1_REW"
                    set_legacy_token WorldEventLegacyToken_MonkeyPawStrength
                    gain_disorder Gargantuan
                }
            }
            
            wish_genes {
                requirements {
                    not_has_token WorldEventLegacyToken_MonkeyPawGenes
                }

                label "EVENT_MONKEYPAW_WISH2"
                stat none

                good {
                    prompt "EVENT_MONKEYPAW_WISH2_REW"
                    set_legacy_token WorldEventLegacyToken_MonkeyPawGenes
                    gain_disorder TamperedGenes
                }
            }
            
            wish_items {
                requirements {
                    not_has_token WorldEventLegacyToken_MonkeyPawItems
                }

                label "EVENT_MONKEYPAW_WISH3"
                stat none

                good {
                    prompt "EVENT_MONKEYPAW_WISH3_REW"
                    set_legacy_token WorldEventLegacyToken_MonkeyPawItems
                    random_pool [
                        {
                            gain_disorder SensoryOverloadTrinket
                            get_and_equip_item_from_pool {
                                pool chapter_rare
                                restrict trinket
                            }
                        }
                        {
                            gain_disorder SensoryOverloadFace
                            get_and_equip_item_from_pool {
                                pool chapter_rare
                                restrict face
                            }
                        }
                        {
                            gain_disorder SensoryOverloadHead
                            get_and_equip_item_from_pool {
                                pool chapter_rare
                                restrict head
                            }
                        }
                        {
                            gain_disorder SensoryOverloadNeck
                            get_and_equip_item_from_pool {
                                pool chapter_rare
                                restrict neck
                            }
                        }
                        {
                            gain_disorder SensoryOverloadWeapon
                            get_and_equip_item_from_pool {
                                pool chapter_rare
                                restrict weapon
                            }
                        }
                    ]
                }
            }

            wish_levelups {
                requirements {
                    not_has_token WorldEventLegacyToken_MonkeyPawKnowledge
                }

                label "EVENT_MONKEYPAW_WISH4"
                stat none

                good {
                    prompt "EVENT_MONKEYPAW_WISH4_REW"
                    set_legacy_token WorldEventLegacyToken_MonkeyPawKnowledge
                    gain_disorder BrainDead
                    level_up self
                    level_up self
                }
            }
        }
    }
}

MysteriousTomb1 {
    main {
        options.overwrite {
            smash {
                label "EVENT_MYSTERIOUSTOMB1_ANSW"
                stat dex

                good {
                    set_frame 2
                    override_end_option_prompt "EVENT_MYSTERIOUSTOMB1_END"
                    event_now_same_cat MysteriousTomb2
                    reward {
                        common {
                            prompt "EVENT_MYSTERIOUSTOMB1_REW2"
                        }
                    }
                }
            }

            leave {
                label "EVENT_LEAVE_ANSW"
                stat none
                animation choice_leave
                
                good {
                    prompt "EVENT_MYSTERIOUSTOMB1_REW5"
                    play_animation [resultLeave 0]
                }
            }
        }
    }
}

MysteriousTomb2 {
    main {
        options.overwrite {
            smash {
                label "EVENT_MYSTERIOUSTOMB2_ANSW"
                stat con

                good {
                    set_frame 2
                    reward {
                        common {
                            prompt "EVENT_MYSTERIOUSTOMB2_REW1"
                            override_end_option_prompt "EVENT_MYSTERIOUSTOMB2_END_RETRY"
                            event_now_same_cat MysteriousTomb2 //try same event again
                        }
                        rare {
                            prompt "EVENT_MYSTERIOUSTOMB2_REW2"
                            self_status_next_fight {
                                AllStatsUp 1
                            }
                            override_end_option_prompt "EVENT_MYSTERIOUSTOMB2_END_NEXT"
                            event_now_same_cat MysteriousTomb3
                        }
                    }
                }
            }

            leave {
                label "EVENT_LEAVE_ANSW"
                stat none
                animation choice_leave
                
                good {
                    prompt "EVENT_MYSTERIOUSTOMB2_REW5"
                    play_animation [resultLeave 0]
                }
            }
        }
    }
}


MysteriousTomb3 {
    main {
        options.overwrite {
            smash {
                label "EVENT_MYSTERIOUSTOMB3_ANSW"
                stat lck

                good {
                    set_frame 2
                    reward {
                        common {
                            prompt "EVENT_MYSTERIOUSTOMB3_REW1"
                            gain_coins [50 100]
                            get_item_from_pool chapter_rare
                        }
                        rare {
                            prompt "EVENT_MYSTERIOUSTOMB3_REW2"
                            get_item EyeOfRa
                        }
                    }
                }
            }

            leave {
                label "EVENT_LEAVE_ANSW"
                stat none
                animation choice_leave
                
                good {
                    prompt "EVENT_MYSTERIOUSTOMB3_REW5"
                    play_animation [resultLeave 0]
                }
            }
        }
    }
}

MysteriousTomb4 {
    main {
        options.overwrite {
            smash {
                label "EVENT_MYSTERIOUSTOMB4_ANSW"
                stat int

                good {
                    set_frame 2
                    reward {
                        common {
                            prompt "EVENT_MYSTERIOUSTOMB4_REW1"
                            //successfuly escape
                        }
                        rare {
                            prompt "EVENT_MYSTERIOUSTOMB4_REW2"
                            get_item PharaohStaff
                        }
                    }
                }
            }
        }
    }
}

ElephantsFootCloser {
    main {
         options.overwrite {
            move_closer {
                label "EVENT_ELEPHANTSFOOTCLOSER_ANSW"
                stat str

                good {
                    set_frame 2
                    reward {
                        common {
                            prompt "EVENT_ELEPHANTSFOOTCLOSER_REW1"
                            random_mutation 1
                            permanent_stats {
                                con 1
                            }
                        }
                        rare {
                            prompt "EVENT_ELEPHANTSFOOTCLOSER_REW2"
                            random_mutation 1
                            permanent_stats {
                                random 1
                            }
                            event_now_same_cat ElephantsFootEvenCloser
                        }
                    }
                }
            }

            leave {
                label "EVENT_LEAVE_ANSW"
                stat none
                animation choice_leave
                
                good {
                    prompt "EVENT_ELEPHANTSFOOTCLOSER_REW5"
                    play_animation [resultLeave 0]
                }
            }
        }
    }
}

ElephantsFootEvenCloser {
    main {
        options.overwrite {
            withstand {
                label "EVENT_ELEPHANTSFOOTEVENCLOSER_ANSW"
                stat con

                good {
                    set_frame 2
                    reward {
                        common {
                            prompt "EVENT_ELEPHANTSFOOTEVENCLOSER_REW1"
                            random_mutation 2
                            permanent_stats {
                                con 1
                            }
                        }
                        rare {
                            prompt "EVENT_ELEPHANTSFOOTEVENCLOSER_REW2"
                            random_mutation 4
                            permanent_stats {
                                random 5
                            }
                            event_now_same_cat ElephantsFootEvenCloser
                        }
                    }
                }
            }

            leave {
                label "EVENT_LEAVE_ANSW"
                stat none
                animation choice_leave
                
                good {
                    prompt "EVENT_ELEPHANTSFOOTEVENCLOSER_REW5"
                    play_animation [resultLeave 0]
                }
            }
        }
    }
}

MysteriousStrangerForced {
    main {
        setup {
            conditional_reward {
                requirements {
                    has_token HasPlayedMysteriousStranger
                }
                reward {
                    prompt "EVENT_MYSTERIOUSSTRANGER_QUES2"
                }
            }
        }

        options.overwrite {
            play {
                label "EVENT_MYSTERIOUSSTRANGER_ANSW"
                stat spd

                good {
                    reward {
                        common {
                            set_frame 3
                            set_adventure_token HasPlayedMysteriousStranger
                            prompt "EVENT_MYSTERIOUSSTRANGER_REW1"
                            gain_coins [5 15]
                            override_end_option_prompt "EVENT_MYSTERIOUSSTRANGER_END_AGAIN"
                            event_now_same_cat MysteriousStranger
                        }
                        rare {
                            set_frame 4
                            set_adventure_token HasPlayedMysteriousStranger
                            prompt "EVENT_MYSTERIOUSSTRANGER_REW2"
                            gain_coins [20 100]
                            permanent_stats {
                                spd 1
                            }
                        }
                    }
                }
            }
        }
    }
}

JaggedPathwayStalactite {
    main {
        options.overwrite {
            pull_it_out {
                label "EVENT_JAGGEDPATHWAY_STALACTITE_ANSW1"
                stat none

                good {
                    set_frame 6
                    reward {
                        common {
                            prompt "EVENT_JAGGEDPATHWAY_STALACTITE_REW1"
                            lose_specific_item SlagTight
                            get_item SlagMight
                        }
                        rare {
                            prompt "EVENT_JAGGEDPATHWAY_STALACTITE_REW2"
                            lose_specific_item SlagTight
                            get_item SlagMight
                        }
                    }
                }
            }
            
            leave_it_in {
                label "EVENT_JAGGEDPATHWAY_STALACTITE_ANSW2"
                stat none
                animation choice_leave
                
                good {
                    prompt "EVENT_JAGGEDPATHWAY_STALACTITE_REW5"
                    play_animation [resultLeave 0]
                }
            }
        }
    }
}

MysteriousCave1 { //repell
    main {
        options.overwrite {
            repell {
                label "EVENT_MYSTERIOUSCAVE1_RAPPEL_ANSW"
                stat dex

                good {
                    set_frame 2
                    reward {
                        common {
                            prompt "EVENT_MYSTERIOUSCAVE1_REW1"
                            conditional_reward {
                                requirements {
                                    has_token AdventureToken_MysteriousCave_FamiliarVoice
                                }
                                reward {
                                    next_event_bonus 1
                                }
                            }
                            event_now_same_cat MysteriousCave2
                        }
                        rare {
                            prompt "EVENT_MYSTERIOUSCAVE1_REW2"
                            conditional_reward {
                                requirements {
                                    has_token AdventureToken_MysteriousCave_FamiliarVoice
                                }
                                reward {
                                    next_event_bonus 2
                                }
                                else {
                                    next_event_bonus 1
                                }
                            }
                            event_now_same_cat MysteriousCave2
                        }
                    }
                }
            }

            leave {
                label "EVENT_LEAVE_ANSW"
                stat none
                animation choice_leave
                
                good {
                    prompt "EVENT_MYSTERIOUSCAVE1_REW5"
                    play_animation [resultLeave 0]
                }
            }
        }
    }
}

MysteriousCave2 {
    main {
        options.overwrite {
            repell {
                label "EVENT_MYSTERIOUSCAVE1_TALKTO_ANSW"
                stat cha

                good {
                    set_frame 2
                    reward {
                        common {
                            prompt "EVENT_MYSTERIOUSCAVE2_REW1"
                            upgrade_ability random
                            event_now_same_cat MysteriousCave3
                        }
                        rare {
                            prompt "EVENT_MYSTERIOUSCAVE2_REW2"
                            self_status_next_fight {
                                AllStatsUp 1
                            }
                            upgrade_ability random
                            upgrade_passive random
                            event_now_same_cat MysteriousCave3
                        }
                    }
                }
            }
        }
    }
}

MysteriousCave3 { //climb out
    main {
        options.overwrite {
            repell {
                label "EVENT_MYSTERIOUSCAVE3_CLIMB_ANSW"
                stat str

                good {
                    set_frame 3
                    reward {
                        common {
                            prompt "EVENT_MYSTERIOUSCAVE3_REW1"
                            //nothing, escape event
                        }
                        rare {
                            prompt "EVENT_MYSTERIOUSCAVE3_REW2"
                            self_status_next_fight {
                                AllStatsUp 1
                            }
                        }
                    }
                }
            }
        }
    }
}

MysteriousMachine_Good {
    main {
        options.overwrite {
            copy {
                label "EVENT_MYSTERIOUSMACHINE_COPY_ANSW"

                good {
                    set_frame 5
                    prompt "EVENT_MYSTERIOUSMACHINE_GOOD_REW1"
                    gain_clone_familiar {
                        object PlayerCat_MachineClone
                    }
                }
            }

            scale {
                label "EVENT_MYSTERIOUSMACHINE_SCALE_ANSW"

                good {
                    set_frame 6
                    prompt "EVENT_MYSTERIOUSMACHINE_GOOD_REW2"
                    party_gain_disorder_from_pool [Dwarfism]
                }
            }

            print {
                label "EVENT_MYSTERIOUSMACHINE_PRINT_ANSW"

                good {
                    set_frame 7
                    prompt "EVENT_MYSTERIOUSMACHINE_GOOD_REW3"
                    copy_party_items 1
                }
            }
        }
    }
}

MysteriousMachine_Bad {
    main {
        options.overwrite {
            copy {
                label "EVENT_MYSTERIOUSMACHINE_COPY_ANSW"

                good {
                    set_frame 8
                    prompt "EVENT_MYSTERIOUSMACHINE_BAD_REW1"
                    play_animation resultBad
                    clone_self_to_party 1
                }
            }

            scale {
                label "EVENT_MYSTERIOUSMACHINE_SCALE_ANSW"

                good {
                    set_frame 9
                    prompt "EVENT_MYSTERIOUSMACHINE_BAD_REW2"
                    party_gain_disorder_from_pool [Gigantism]
                }
            }

            print {
                label "EVENT_MYSTERIOUSMACHINE_PRINT_ANSW"

                good {
                    set_frame 10
                    prompt "EVENT_MYSTERIOUSMACHINE_BAD_REW3"
                    play_animation resultBad
                    copy_items_to_party 1
                }
            }
        }
    }
}

BodyOfGlorg_Gift {
    main {
        options.overwrite {
            head {
                label "EVENT_GIFTOFGLORG_HEAD_ANSW"

                good {
                    prompt "EVENT_GIFTOFGLORG_REW1"
                    set_frame 5
                    get_parasite Beepis
                    gain_disorder BlessingOfGlorg
                }
            }

            neck {
                label "EVENT_GIFTOFGLORG_NECK_ANSW"
                
                good {
                    prompt "EVENT_GIFTOFGLORG_REW2"
                    set_frame 5
                    get_parasite Cunch
                    gain_disorder BlessingOfGlorg
                }
            }
            
            face {
                label "EVENT_GIFTOFGLORG_FACE_ANSW"
                
                good {
                    prompt "EVENT_GIFTOFGLORG_REW3"
                    set_frame 5
                    get_parasite Feebis
                    gain_disorder BlessingOfGlorg
                }
            }
        }
    }
}
